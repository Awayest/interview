# 【2022前端面试】前端安全面试题汇总（加紧收藏）

> 更新时间：2022年3月2日。
>
> 本文致力于建设前端面试题库，欢迎兄弟们投稿哈！

## 大纲

前端的安全问题，向来是个大公司郑重考虑和要防范的。也是向前端高级的一条必进之路。

![前端安全面试题](https://guizimo.oss-cn-shanghai.aliyuncs.com/img/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E9%9D%A2%E8%AF%95%E9%A2%98.png)

### 1、XSS攻击

#### 什么是XSS攻击？

XSS 攻击指的是**跨站脚本攻击**，是一种**代码注入攻击**。攻击者通过在网站注入恶意脚本，使之在用户的浏览器上运行，从而盗取用户的信息如 cookie 等。

XSS 的本质是因为**网站没有对恶意代码进行过滤**，与正常的代码混合在一起了，浏览器没有办法分辨哪些脚本是可信的，从而导致了恶意代码的执行。

攻击者可以通过这种攻击方式可以进行以下操作：

- 获取页面的数据，如DOM、cookie、localStorage；
- DOS攻击，发送合理请求，占用服务器资源，从而使用户无法访问服务器；
- 破坏页面结构；
- 流量劫持（将链接指向某网站）；

#### XSS攻击的类型？

- **存储型**：存储型指的是恶意脚本会存储在目标服务器上，当浏览器请求数据时，脚本从服务器传回并执行。
- **反射型**：反射型指的是攻击者诱导用户访问一个带有恶意代码的 URL 后，服务器端接收数据后处理，然后把带有恶意代码的数据发送到浏览器端，浏览器端解析这段带有 XSS 代码的数据后当做脚本执行，最终完成 XSS 攻击。 
- **DOM 型**：DOM 型指的通过修改页面的 DOM 节点形成的 XSS。

#### 三种攻击的区别？

反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库⾥，反射型 XSS 的恶意代码存在 URL ⾥。

DOM 型 XSS 跟前两种 XSS 的区别是：DOM 型 XSS 攻击中，取出和执⾏恶意代码由浏览器端完成，属于前端JavaScript ⾃身的安全漏洞，⽽其他两种 XSS 都属于服务端的安全漏洞。

#### 如何防范XSS攻击？

- 一种是使用纯前端的方式，不用服务器端拼接后返回（不使用服务端渲染）
- 对需要插入到 HTML 中的代码做好充分的转义
- 使用 CSP ，CSP 的本质是建立一个白名单，告诉浏览器哪些外部资源可以加载和执行，从而防止恶意代码的注入攻击
- 对一些敏感信息进行保护，比如 cookie 使用 http-only，使得脚本无法获取

### 2、CSRF攻击

#### 什么是CSRF攻击？

CSRF 攻击指的是**跨站请求伪造攻击**，攻击者诱导用户进入一个第三方网站，然后该网站向被攻击网站发送跨站请求。如果用户在被攻击网站中保存了登录状态，那么攻击者就可以利用这个登录状态，绕过后台的用户验证，冒充用户向服务器执行一些操作。

CSRF 攻击的**本质是利用 cookie 会在同源请求中携带发送给服务器的特点，以此来实现用户的冒充。**

#### CSRF攻击的类型？

- GET 类型的 CSRF 攻击，比如在网站中的一个 img 标签里构建一个请求，当用户打开这个网站的时候就会自动发起提交。
- POST 类型的 CSRF 攻击，比如构建一个表单，然后隐藏它，当用户进入页面时，自动提交这个表单。
- 链接类型的 CSRF 攻击，比如在 a 标签的 href 属性里构建一个请求，然后诱导用户去点击。

#### 如何防范CSRF攻击？

- **进行同源检测**，服务器根据 http 请求头中 origin 或者 referer 信息来判断请求是否为允许访问的站点，从而对请求进行过滤。当 origin 或者 referer 信息都不存在的时候，直接阻止请求。这种方式的缺点是有些情况下 referer 可以被伪造，同时还会把搜索引擎的链接也给屏蔽了。所以一般网站会允许搜索引擎的页面请求，但是相应的页面请求这种请求方式也可能被攻击者给利用。（Referer 字段会告诉服务器该网页是从哪个页面链接过来的）

- **Token验证**，服务器向用户返回一个随机数 Token ，当网站再次发起请求时，在请求参数中加入服务器端返回的 token ，然后服务器对这个 token 进行验证。这种方法解决了使用 cookie 单一验证方式时，可能会被冒用的问题，但是这种方法存在一个缺点就是，我们需要给网站中的所有请求都添加上这个 token，操作比较繁琐。还有一个问题是一般不会只有一台网站服务器，如果请求经过负载平衡转移到了其他的服务器，但是这个服务器的 session 中没有保留这个 token 的话，就没有办法验证了。
- **双重cookie**，服务器在用户访问网站页面时，向请求域名注入一个Cookie，内容为随机字符串，然后当用户再次向服务器发送请求的时候，从 cookie 中取出这个字符串，添加到 URL 参数中，然后服务器通过对 cookie 中的数据和参数中的数据进行比较，来进行验证。
- **在设置 cookie 属性的时候设置 Samesite ，限制 cookie 不能作为被第三方使用**，从而可以避免被攻击者利用。Samesite 一共有两种模式，一种是严格模式，在严格模式下 cookie 在任何情况下都不可能作为第三方 Cookie 使用，在宽松模式下，cookie 可以被请求是 GET 请求，且会发生页面跳转的请求所使用。

### 3、网络劫持

#### DNS劫持

**案例**： 输⼊京东被强制跳转到淘宝这就属于dns劫持

**劫持方式**：

- DNS强制解析: 通过修改运营商的本地DNS记录，来引导⽤户流量到缓存服务器
- 302跳转的⽅式: 通过监控⽹络出⼝的流量，分析判断哪些内容是可以进⾏劫持处理的,再对劫持的内存发起302跳转的回复，引导⽤户获取内容

#### HTTP劫持

**案例**：访问⾕歌但是⼀直有贪玩蓝⽉的⼴告

**劫持方式**：由于http明⽂传输,运营商会修改你的http响应内容

**防御手段**：全站HTTPS，将HTTP加密，这使得运营商⽆法获取明⽂，就⽆法劫持你的响应内容。

### 4、iframe的风险

**iframe的作用**：

使用iframe在页面上添加第三方提供的广告、天气预报、社交分享插件等等。

**iframe的隐患**：

- 因为iframe中的内容是由第三方来提供的，默认情况下他们不受我们的控制，他们可以在iframe中运行JavaScirpt脚本、Flash插件、弹出对话框等等，这可能会破坏前端用户体验。
- 如果iframe中的域名因为过期而被恶意攻击者抢注，或者第三方被黑客攻破，iframe中的内容被替换掉了，从而利用用户浏览器中的安全漏洞下载安装木马、恶意勒索软件等等。

#### 防御iframe

- 使用充分信任的网站
- 设置 CSP 即 Content-Security-Policy 请求头
- 在HTML5中，iframe有了一个叫做sandbox的安全属性，通过它可以对iframe的行为进行各种限制，充分实现**最小权限原则**。

### 5、中间人攻击

#### 什么是中间人攻击？

中间⼈ (Man-in-the-middle attack, MITM) 是指攻击者与通讯的两端分别创建独⽴的联系,，并交换其所收到的数据,，使通讯的两端认为他们正在通过⼀个私密的连接与对⽅直接对话， 但事实上整个会话都被攻击者完全控制。

在中间⼈攻击中，攻击者可以拦截通讯双⽅的通话并插⼊新的内容。

#### 中间人攻击过程？

- 客户端发送请求到服务端，请求被中间⼈截获
- 服务器向客户端发送公钥
- 中间⼈截获公钥，保留在⾃⼰⼿上。然后⾃⼰⽣成⼀个**伪造的**公钥，发给客户端
- 客户端收到伪造的公钥后，⽣成加密hash值发给服务器
- 中间⼈获得加密hash值，⽤⾃⼰的私钥解密获得真秘钥,同时⽣成假的加密hash值，发给服务器
- 服务器⽤私钥解密获得假密钥,然后加密数据传输给客户端

#### 预防方案

- 用可信的第三方CA厂商
- 不下载未知来源的证书，不要去下载一些不安全的文件
- 确认你访问的URL是HTTPS的，确保网站使用了SSL，确保禁用一些不安全的SSL，只开启：TLS1.1，TLS1.2
- 不要使用公用网络发送一些敏感的信息
- 不要去点击一些不安全的连接或者恶意链接或邮件信息

### 6、SQL注入

#### 什么是SQL注入

就是通过把SQL命令插入到Web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗数据库服务器执行恶意的SQL命令，从而达到和服务器进行直接的交互

#### 预防方案

- i）后台进行输入验证，对敏感字符过滤。
- ii）使用参数化查询，能避免拼接SQL，就不要拼接SQL语句。

### 7、前端数据安全

在网页中所有的资源都是在客户端的，但是部分数据为了针对反爬虫。如猫眼电影、天眼查等等，以数据内容为核心资产的企业，需要做到数据安全。

##### 预防方案：

- font-face拼接方式：猫眼电影、天眼查
- background 拼接：美团
- 伪元素隐藏：汽车之家
- 元素定位覆盖式：去哪儿
- iframe 异步加载：网易云音乐

### 8、HTTPS安全

黑客可以利用SSL Stripping这种攻击手段，强制让HTTPS降级回HTTP，从而继续进行中间人攻击。

##### 预防方案：

使用HSTS（HTTP Strict Transport Security），它通过下面这个HTTP Header以及一个预加载的清单，来告知浏览器和网站进行通信的时候强制性的使用HTTPS，而不是通过明文的HTTP进行通信。

这里的“强制性”表现为浏览器无论在何种情况下都直接向务器端发起HTTPS请求，而不再像以往那样从HTTP跳转到HTTPS。另外，当遇到证书或者链接不安全的时候，则首先警告用户，并且不再让用户选择是否继续进行不安全的通信。

### 9、静态资源完整性校验

使用 内容分发网络 (CDNs) 在多个站点之间共享脚本和样式表等文件可以提高站点性能并节省带宽。然而，使用CDN也存在风险，如果攻击者获得对 CDN 的控制权，则可以将任意恶意内容注入到 CDN 上的文件中 （或完全替换掉文件），因此可能潜在地攻击所有从该 CDN 获取文件的站点。

##### 预防方案

将使用 base64 编码过后的文件哈希值写入你所引用的 `<script> `或 标签的 integrity 属性值中即可启用子资源完整性能。

## 系列文章

- [【2022前端面试】HTML面试题汇总（加紧收藏）](https://guizimo.blog.csdn.net/article/details/108750774)
- [【2022前端面试】CSS面试题汇总（加紧收藏）](https://guizimo.blog.csdn.net/article/details/108750606)
- [【2022前端面试】CSS手写面试题汇总（加紧收藏）](https://guizimo.blog.csdn.net/article/details/123265683)

## 博客说明与致谢

> 文章所涉及的部分资料来自互联网整理，其中包含自己个人的总结和看法，分享的目的在于共建社区和巩固自己。
>
> 引用的资料如有侵权，请联系本人删除！
>
> 感谢勤劳的[自己](https://www.guizimo.com)，[个人博客](https://blog.guizimo.com/)，[GitHub学习](https://github.com/Tangleia)，[GitHub](https://github.com/guizimo)
>
> 公众号[【归子莫】](https://welcome.guizimo.com/gzh)，小程序[【子莫说】](https://welcome.guizimo.com/zms)
>
> 如果你感觉对你有帮助的话，不妨给我点赞鼓励一下，好文记得收藏哟！关注我一起成长！
>
> 所属专栏：[前端面试](https://blog.csdn.net/qq_45163122/category_11649804.html)
>
> 幸好我在，感谢你来！